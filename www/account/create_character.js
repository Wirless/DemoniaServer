var WorldsBox;var ServerList=new Array();var Options=new Array();var PreselectWorld="";function GetIEVersion(){var UserAgent=window.navigator.userAgent;var MSIE=UserAgent.indexOf("MSIE ");if(MSIE>0){return parseInt(UserAgent.substring(MSIE+5,UserAgent.indexOf(".",MSIE)))}else{return null}}function InitializeCharacterCreator(b,c){var IEVersion=GetIEVersion();if(IEVersion!==null&&IEVersion<=7){var a=document.getElementById("filterbox_location");if(a)a.style.display="none";document.getElementById("filterbox_pvp").style.display="none";document.getElementById("suggested_world_box").style.display="none";return}document.getElementById("plain_world_box").style.display="none";var a=document.getElementById("filterbox_location");if(a){a.style.display=""}document.getElementById("filterbox_pvp").style.display="";if(PreselectWorld.length>0){var d=GetServerByName(PreselectWorld);if(d!=null){b=d[1];c=d[2]}}else{PreselectWorld=undefined}if(a){document.getElementById(GetFilterOptionId("server_location",b)).checked="checked"}document.getElementById(GetFilterOptionId("server_pvp_type",c)).checked="checked";UpdateServerList(PreselectWorld)}function GetFilterOptionId(b,a){return"option_"+b+"_"+a}function GetServerOptionId(a){return"server_"+a}function CreateFilterOption(c,a,b){var OptionID=GetFilterOptionId(c,a);var OptionData=new Object();OptionData.GroupID=c;OptionData.Value=a;Options[OptionID]=OptionData;document.write('<div class="OptionContainer">');if(c=="server_pvp_type"){document.write('<img class="PVPTypeIcon" src="account/'+OptionID+'.gif" alt="Server PVP Type" /><br/>')}document.write('<input type="radio" name="'+c+'" id="'+OptionID+'" onClick="UpdateServerList()" /> <label for="'+OptionID+'">'+b+"</label></div>")}function GetActiveFilterOption(b){for(var a in Options){if(Options[a].GroupID==b&&document.getElementById(a).checked){return Options[a].Value}}return""}function SelectWorld(a){var b=document.getElementById(GetServerOptionId(a));if(b!=null){b.checked="checked";var c=document.getElementById("suggested_world_div");c.innerHTML=a}}function SelectRandomWorld(){var a=GetSelectableServers();var b=Math.floor(Math.random()*(a.length));if(b<0||b>a.length){b=0}SelectWorld(a[b])}function ClearServerList(){WorldsBox=document.getElementById("world_list_tr");while(WorldsBox.firstChild!=null){WorldsBox.removeChild(WorldsBox.firstChild)}}function GetSelectableServers(){var a=GetActiveFilterOption("server_location");var c=GetActiveFilterOption("server_pvp_type");var MatchedServers=new Array();for(var b in ServerList){if((a==ServerList[b][1]||a=="all"||!a)&&(c==ServerList[b][2]||c=="all")){MatchedServers.push(ServerList[b][0])}}return MatchedServers}function GetServerByName(a){for(var b in ServerList){if(ServerList[b][0]==a){return ServerList[b]}}return null}function UpdateServerList(c){ClearServerList();var f=GetSelectableServers();if(f.length>0){WorldsBox.disabled=""}var i=4;var h=5;var g=f.length;var d;var j;if(Math.floor(g/h)<=i){d=Math.ceil(g/h);j=h}else{d=i;j=Math.ceil(g/d)}for(var e=0;e<d;++e){var TableCell=document.createElement("td");TableCell.setAttribute("style","border-style: none");TableCell.align="center";WorldsBox.appendChild(TableCell);for(var b=0;b<j;++b){var a=b+e*j;if(a<g){var Radio=document.createElement("input");Radio.id=GetServerOptionId(f[a]);Radio.type="radio";Radio.name="world";Radio.value=f[a];var Label=document.createElement("label");Label.setAttribute("for",Radio.id);Label.appendChild(Radio);Label.appendChild(document.createTextNode(f[a]));var RadioDiv=document.createElement("div");RadioDiv.setAttribute("style","width: 10em");RadioDiv.align="left";RadioDiv.appendChild(Label);TableCell.appendChild(RadioDiv)}else{TableCell.appendChild(document.createTextNode("\u00A0"));TableCell.appendChild(document.createElement("br"))}}}if(c!=undefined){SelectWorld(c)}else{SelectRandomWorld()}}function OpenSuggestNameWindow(){window.open(LINK_ACCOUNT+"/content/newaccount/suggestname.php?subtopic=subscription","SuggestName","width=580px, height=480px, scrollbars=yes")};